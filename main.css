@import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Special+Gothic:wdth,wght@75..125,400..700&display=swap');



/* #region Josh W Comeau's Modern CSS Reset (https://www.joshwcomeau.com/css/custom-css-reset/) */

/* 1. Use a more-intuitive box-sizing model */
*, *::before, *::after
{
    box-sizing: border-box;
}

/* 2. Remove default margin */
*
{
    margin: 0;
}

/* 3. Enable keyword animations */
@media (prefers-reduced-motion: no-preference)
{
    html
    {
        interpolate-size: allow-keywords;
    }
}

/*
    4 (alt). Add accessible line height that decreases with size
    
    WARNING: This makes line-height not inheritable like it
             normally is, due to using a universal selector.
             It needs to be this way, since the `em` unit doesn't
             inherit well.
             Consider disabling this and explicitly targeting
             large text instead.
*/
*
{
    line-height: calc(1em + 0.5rem);
}

body
{
    /* 4. Add accessible line-height */
    /* line-height: 1.5; */

    /* 5. Improve text rendering */
    -webkit-font-smoothing: antialiased;
}

/* 6. Improve media defaults */
img, picture, video, canvas, svg
{
    display: block;
    max-width: 100%;
}

/* 7. Inherit fonts for form controls */
input, button, textarea, select
{
    font: inherit;
}

/* 8. Avoid text overflows */
p, h1, h2, h3, h4, h5, h6
{
    overflow-wrap: break-word;
}

/*
    8 (alt). Avoid text overflow on ALL elements, with hyphens

    May make hard wraps more common. Should be safe, distracting
    at ABSOLUTE worst, but enable with care regardless.
*/
/* *
{
    overflow-wrap: break-word;
    hyphens: auto;
} */

/* 9. Improve line wrapping */
p
{
    text-wrap: pretty;
}

h1, h2, h3, h4, h5, h6
{
    text-wrap: balance;
}

/* 10. Create a root stacking context, for frameworks like React */
#root, #__next
{
    isolation: isolate;
}

/* #endregion */


/* #region Theme Color Variables  */

html, html.light
{
    --background-primary: #eee;
    --border-light: #a9aaad;
    --border-faint: color-mix(in oklab, var(--border-light) 75%, transparent);

    --button-hover: #d0d0d7;
    --button-pressed: #b1b1b9;

    --font-header: "Special Gothic", sans-serif;
    --font-body: "Roboto Condensed", sans-serif;
    --text-primary: #000;
    --text-secondary: #888;
}

html.dark
{
    --background-primary: #1b1b1b;
    --border-light: #565552;

    --button-hover: #2f2f28;
    --button-pressed: #4e4e46;

    --text-primary: #fff;
    --text-secondary: #777;
}

/* #endregion */

/* #region Holistic */

/* Invert SVGs since it's a hassle to change their color otherwise, but only for screens, not print and such */
@media screen
{
    .dark img[src$=".svg"],
    .dark .invertable-svg
    {
        filter: invert() brightness(85%);

        &.full-brightness
        {
            filter: invert();
        }
    }
    .dark .invertable-svg_pseudo
    {
        &::before, &::after
        {
            filter: invert() brightness(85%);
        }
        &.full-brightness::before, &.full-brightness::after
        {
            filter: invert();
        }
    }
}

@media print
{
    #meta-ui
    {
        display: none;
    }
}

/* above Landscape SHD */
@media (orientation: landscape) and (min-width: 1280px)
{
    body
    {
        max-width: 96rem;
    }
}

body
{
    margin: 0 auto;
    font-family: var(--font-body);

    background-color: var(--background-primary);
    color: var(--text-primary);
}

h1, h2, h3, h4, h5, h6
{
    font-family: var(--font-header);
    font-weight: 600;
    font-variation-settings: "wdth" 75;
    text-transform: uppercase;
}
h2
{
    font-size: 1.8em;
}

input[type="text"],
.labeled-text output
{
    background: none;
    border: 1px dashed var(--text-secondary);
    border-width: 0 0 1px 0;
    color: var(--text-primary);
}
.labeled-text output
{
    color: var(--text-secondary);

    display: flex;
    align-items: center;
}

.labeled-check
{
    display: flex;
    flex-direction: row;
    align-items: center;
}
.labeled-check input
{
    appearance: none;
    width: 1em;
    height: 1em;
    background-color: #fff;
    border: 1px solid var(--border-light);
    border-radius: 3px;

    position: relative;

    &:checked
    {
        background-color: var(--text-secondary);

        &::after
        {
            content: "âœ“";
            font-family: monospace;
            font-size: 0.9em;
            line-height: 1;

            position: absolute;
            right: 50%;
            bottom: 50%;
            transform: translate(50%, 50%);
        }
    }
}
.labeled-check label
{
    user-select: none;
    flex-grow: 1;
}

/* #endregion */

/* #region Meta UI */

#toggle-theme
{
    --bottom-radius: 6px;

    position: absolute;
    top: 0;
    right: 4em;

    width: 2em;
    height: 2em;
    height: calc(2em - var(--bottom-radius) / 2);
    padding: 0.25em;

    border-radius: 0 0 var(--bottom-radius) var(--bottom-radius);
    border: 1px solid var(--text-secondary);
    border-top: none;

    background-color: var(--background-primary);

    &:focus, &:hover
    {
        background-color: var(--button-hover);
    }
    &:active
    {
        background-color: var(--button-pressed);
    }
}

#toggle-theme img
{
    height: 100%;
    margin: 0 auto;
}

/* #endregion */



/* #region General Layout */

#sheet-grid
{
    display: grid;
    margin-top: 1em;
    gap: 0.5em;
}

.labeled-text
{
    display: flex;
    flex-direction: column;

    position: relative;
    --label-in-margin-size: 1.1em;
    margin-bottom: var(--label-in-margin-size);

    & > :is(input, output)
    {
        width: 100%;
        height: 100%;
    }
    & > label
    {
        color: var(--text-secondary);
        font-family: var(--font-header);
        font-weight: 600;
        font-variation-settings: "wdth" 75;
        text-transform: uppercase;

        /* Shift labels into the margin area */
        position: absolute;
        line-height: 1;
        bottom: calc(var(--label-in-margin-size) * -1);
    }
}

.labeled-radio
{
    display: flex;
    flex-direction: row;
    margin-left: 0.25em;

    & [type="radio"]
    {
        margin-right: 0.066em;
    }
}

/* #endregion */


/* #region Sheet Header */

#sheet-header
{
    display: grid;
    /* grid-template-columns: auto 1fr;
    grid-template-rows: repeat(3, auto);
    grid-template-areas:
        "a c"
        "b d"
        "e e"; */
    grid-template-columns: auto 1em 1fr;
    grid-template-rows: auto auto 0.5em auto;
    grid-template-areas:
        "a . c"
        "b . d"
        ". . ."
        "e e e";
    gap: 0.5em 0.75em;

    /* Non-labels, owners of labels, and children of labels (+ affected elements) */
    & :not(label, :has(label)):not(:is(input, output, label) *),
    & .labeled-button
    {
        font-size: 1.75em;
        font-family: var(--font-header);
        font-weight: 600;
        font-variation-settings: "wdth" 75;
        font-variant: small-caps;
    }

    & .labeled-button
    {
        font-variant: normal;
        text-transform: uppercase;
        color: var(--text-secondary);
    }
}


/* #region Sub-Sections */

:has(> #hero-name)
{
    grid-area: a;
    width: 40ch;
}
#hero-name
{
    width: 100%;
    height: 100%;
}

#identity-and-status
{
    grid-area: b;
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 0.75em;

    & .labeled-button
    {
        width: fit-content;
    }
}

#power-and-points,
#affiliation-hq-debut
{
    display: grid;
    gap: 1em;
}
#power-and-points
{
    grid-area: c;
    grid-template-columns: repeat(2, 1fr);

    & .labeled-text
    {
        margin-bottom: 0;

        & :is(input, output)
        {
            font-size: 2.25em;
            height: fit-content;
            margin-top: auto;
        }
    }
}
#affiliation-hq-debut
{
    grid-area: d;
    grid-template-columns: repeat(3, 1fr);

    & .labeled-text
    {
        margin-top: var(--label-in-margin-size);
    }
}


#physical-attributes
{
    grid-area: e;
    display: flex;
    flex-direction: row;
    gap: 1em;

    & label
    {
        right: 0;
    }
}

/* #endregion */

/* #region Identity Secrecy Button */

:has(> #ident-secrecy)
{
    position: relative;

    transition: filter 0.1s linear;
    &, & *
    {
        cursor: pointer;
    }
    &:hover
    {
        filter: opacity(80%);
    }
    &:active
    {
        filter: opacity(60%);
    }


    & > :not(label)
    {
        position: relative;
        /* Necessary because despite not displaying it there's some weird fuckass ghost quantum invisible 
           space around the checkbox/button if it's not vertically aligned to the axis you're positiong from */
        vertical-align: top;
        top: 50%;
        transform: translateY(-50%);
    }
    & > label
    {
        position: relative;
        display: inline-block;
        top: 50%;
        transform: translateY(-50%);

        width: 6ch;
        text-align: center;
        margin-left: 0.1em;

        user-select: none;
    }
}
#ident-secrecy
{
    width: 0.5em;
    height: 0.5em;
    padding: 0;
    border: 0;

    background-image: url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 448 512'%3E%3C!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--%3E%3Cpath d='M171-16c-36.4 0-57.8 58.3-68.3 112L72 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l24 0 0 32c0 17 3.3 33.2 9.3 48l-9.3 0 0 0-20.5 0c-15.2 0-27.5 12.3-27.5 27.5 0 3 .5 5.9 1.4 8.7l28.9 86.6C40.2 379.6 16 428.1 16 482.3 16 498.7 29.3 512 45.7 512l356.6 0c16.4 0 29.7-13.3 29.7-29.7 0-54.2-24.2-102.7-62.3-135.4l28.9-86.6c.9-2.8 1.4-5.7 1.4-8.7 0-15.2-12.3-27.5-27.5-27.5l-20.5 0 0 0-9.3 0c6-14.8 9.3-31 9.3-48l0-32 24 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-30.7 0c-10.4-53.7-31.9-112-68.3-112-9.6 0-19 3.9-27.5 8.2-8.2 4.1-18.4 7.8-25.5 7.8s-17.3-3.7-25.5-7.8C190-12.1 180.6-16 171-16zm93.7 484.4l-24.8-70.9 27.9-32.5c2.7-3.2 4.2-7.2 4.2-11.4 0-9.7-7.8-17.5-17.5-17.5l-61 0c-9.7 0-17.5 7.8-17.5 17.5 0 4.2 1.5 8.2 4.2 11.4l27.9 32.5-24.8 70.9-57-180.4 35.7 0c18.4 10.2 39.5 16 62 16s43.6-5.8 62-16l35.7 0-57 180.4zM224 256c-34.7 0-64.2-22.1-75.3-53 5.7 3.2 12.3 5 19.3 5l12.4 0c16.5 0 31.1-10.6 36.3-26.2 2.3-7 12.2-7 14.5 0 5.2 15.6 19.9 26.2 36.3 26.2l12.4 0c7 0 13.6-1.8 19.3-5-11.1 30.9-40.6 53-75.3 53z'/%3E%3C/svg%3E");
    background-color: transparent;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;

    transition: rotate 0.2s ease-out;
    transform-origin: top;

    &[value="false"]
    {
        background-image: url("data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3C!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--%3E%3Cpath d='M256 0a64 64 0 1 1 0 128 64 64 0 1 1 0-128zm96 312c0 25-12.7 47-32 59.9l0 92.1c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48l0-92.1C172.7 359 160 337 160 312l0-40c0-53 43-96 96-96s96 43 96 96l0 40zM96 32a56 56 0 1 1 0 112 56 56 0 1 1 0-112zm16 240l0 32c0 32.5 12.1 62.1 32 84.7l0 75.3c0 1.2 0 2.5 .1 3.7-8.5 7.6-19.7 12.3-32.1 12.3l-32 0c-26.5 0-48-21.5-48-48l0-56.6C12.9 364.4 0 343.7 0 320l0-32c0-53 43-96 96-96 12.7 0 24.8 2.5 35.9 6.9-12.6 21.4-19.9 46.4-19.9 73.1zM368 464l0-75.3c19.9-22.5 32-52.2 32-84.7l0-32c0-26.7-7.3-51.6-19.9-73.1 11.1-4.5 23.2-6.9 35.9-6.9 53 0 96 43 96 96l0 32c0 23.7-12.9 44.4-32 55.4l0 56.6c0 26.5-21.5 48-48 48l-32 0c-12.3 0-23.6-4.6-32.1-12.3 0-1.2 .1-2.5 .1-3.7zM416 32a56 56 0 1 1 0 112 56 56 0 1 1 0-112z'/%3E%3C/svg%3E");
        rotate: 360deg;
    }
}

/* #endregion */

/* #endregion */


/* #region Abilities & Saves */

#ability-scores-head
{
    margin-bottom: 0.5em;
}

#scores-row-1
{
    display: grid;
    grid-template-columns: auto auto;
    gap: 2em;
}

#scores-row-2
{
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    margin-top: 1.8em;

    & hr
    {
        --scores-row2-hr-width: 3px;
        width: var(--scores-row2-hr-width);
        border: none;

        background-image: url("./media/dashed-border-segment.svg");
        background-size: calc(100% * (2/3)) 6px;
        background-repeat: repeat space;
        opacity: 0.33;
    }
}

/* #region Row 1 */

#big-six
{
    display: flex;
    flex-direction: row;
    justify-content: space-between;
}

.score-container
{
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr auto auto;
    grid-template-areas:
        "totl totl"
        "titl titl"
        "base enha";
    gap: 0 0.55em;

    & .score-title
    {
        grid-area: titl;
    }
    & .score-total
    {
        grid-area: totl;
    }
    & .base-container
    {
        grid-area: base;
    }
    & .enha-container
    {
        grid-area: enha;
    }
}

.score-container
{
    font-family: var(--font-header);
    font-weight: 600;
    font-variation-settings: "wdth" 75;
    text-transform: uppercase;

    & label
    {
        width: 100%;
        text-align: center;
    }
}


.score-total
{
    margin: 0 auto;

    text-align: center;
    font-size: 2.4em;
    width: 3.5ch;
    height: 3.5ch;

    --score-border-size: 3px;
    border: var(--score-border-size) double var(--text-secondary);

    position: relative;
    display: flex;
    align-items: center;

    & > span
    {
        vertical-align: middle;
        margin: 0 auto;
    }
}

.score-bonus
{
    font-size: 0.7em;

    --bonus-size: 3.2ch;
    width: 3.2ch;
    height: 3.2ch;

    background-color: var(--background-primary);
    border: 1px solid var(--text-secondary);
    border-radius: 100%;

    position: absolute;
    right: 0;
    bottom: 50%;
    transform: translate(80%, 50%);

    display: flex;
    align-items: center;

    & > span
    {
        line-height: 1;
        margin: 0 auto;
    }
}

.score-title
{
    margin: 0.2em auto 0.3em;
    text-align: center;
    color: var(--text-primary);
}

.score-container input
{
    font-size: 1.4em;
    border-top-width: 1px;

    width: 6.5ch;
    text-align: center;
}


#save-scores,
#misc-combat
{
    font-size: 0.85em;

    display: flex;
    flex-direction: row;
    justify-content: space-between;

    & .score-container
    {
        column-gap: 0.6em;
        margin-top: auto;
    }

    & .score-total
    {
        border-color: var(--border-faint);
    }

    & .score-bonus
    {
        bottom: calc(0px - var(--score-border-size));
        transform: translateX(85%);
        font-size: 0.6em;

        color: var(--text-secondary);
        border-color: var(--border-faint);
    }

    & .score-bonus > span
    {
        margin-bottom: 0;
        margin-top: 1px;
    }
}

/* #endregion */

/* #region Row 2 */

/* #region Hero Points */

#hero-points-outer
{
    display: grid;
    grid-template-rows: 1fr auto;

    font-family: var(--font-header);
    font-weight: 600;
    font-variation-settings: "wdth" 75;
    text-transform: uppercase;
}

#hero-points-label
{
    order: 1;
    margin-top: 0.2em;
    font-size: 1.8em;
    text-align: center;
}

#hero-points-inner
{
    --hp-total-size: 18ch;
    width: var(--hp-total-size);
    height: var(--hp-total-size);

    position: relative;

    &::before
    {
        content: "";
        display: block;
        position: absolute;
        inset: 0;

        background-image: url("./media/sun-3-svgrepo-com.svg");
        background-size: 100% 100%;
    }

    & button
    {
        width: 3ch;
        height: 3ch;
        padding: 0;

        font-size: 1.5em;
        font-family: 'Courier New', Courier, monospace;
        font-weight: bold;
        color: color-mix(in oklab, var(--text-primary) 80%, transparent);

        background-color: color-mix(in oklab, var(--background-primary) 66%, transparent);
        border: 1px solid color-mix(in oklab, currentColor 80%, transparent);
        border-radius: 100%;

        position: absolute;
        bottom: 0;

        &:nth-of-type(odd)
        {
            left: 0;
        }
        &:nth-of-type(even)
        {
            right: 0;
        }

        &:focus, &:hover
        {
            &:not(:disabled)
            {
                color: var(--text-primary);
                background-color: color-mix(in oklab, var(--background-primary) 85%, transparent);
            }
        }
        &:active
        {
            /* Somewhat redundant, but keeps specificity in line with above */
            &:not(:disabled)
            {
                color: var(--text-secondary);
                background-color: var(--background-primary);
            }
            &:disabled
            {
                color: color-mix(in oklab, var(--text-secondary) 75%, black);
            }
        }

        &:disabled
        {
            color: var(--text-secondary);
        }
    }
}

#hero-points
{
    display: flex;
    align-items: center;

    position: absolute;
    /* should equal 2ch when size is 18ch */
    inset: calc(var(--hp-total-size) / 9);

    border: 1px solid color-mix(in oklab, var(--text-primary) 60%, transparent);
    border-radius: 100%;

    & > *
    {
        font-size: 2.5em;
        margin: auto;
    }
}

/* #endregion */

/* #region Conditions */

#conditions
{
    display: grid;
    grid-template-rows: 1fr 1fr;
    grid-template-columns: repeat(4, auto);
    grid-auto-flow: column;
    gap: 0 1.5em;

    font-family: var(--font-header);
    font-weight: 600;
    font-variation-settings: "wdth" 75;
    text-transform: uppercase;

    --cond-label-font-size: 1.5;
    --cond-label-in-margin-size: 1.2;
    margin: calc(1em * var(--cond-label-in-margin-size) * var(--cond-label-font-size)) 0;

    & :is(.labeled-text, .labeled-check)
    {
        font-size: calc(1em * var(--cond-label-font-size));
    }
}

#conditions .labeled-text
{
    margin: 0;

    & input
    {
        text-align: center;
    }
    & label
    {
        width: 100%;
        text-align: center;
    }

    &:nth-child(odd)
    {
        & input
        {
            border-top-width: 1px;
        }
        & label
        {
            bottom: unset;
            top: calc(-1em * var(--cond-label-in-margin-size));
        }
    }
    &:nth-child(even) label
    {
        bottom: calc(-1em * var(--cond-label-in-margin-size));
    }
}

#conditions .labeled-check
{
    position: relative;

    & input
    {
        margin: 0 4ch;
    }

    & label
    {
        margin: 0;
        position: absolute;
        right: 50%;
        transform: translateX(50%);

        line-height: 1;
        color: var(--text-secondary);
    }
    &:nth-child(odd) label
    {
        top: calc(-1em * var(--cond-label-in-margin-size));
    }
    &:nth-child(even) label
    {
        bottom: calc(-1em * var(--cond-label-in-margin-size));
    }
}

/* #endregion */

/* #region Combat Scores */

#atk-bonuses
{
    display: grid;
    grid-template-rows: 1fr 1fr;
    grid-template-areas:
        "gnral gnral"
        "melee rnged";
    align-items: center;
    gap: 0.2em 0.5em;

    font-size: 1.5em;
    font-family: var(--font-header);
    font-weight: 600;
    font-variation-settings: "wdth" 75;
    text-transform: uppercase;

    & .labeled-text
    {
        --label-in-margin-size: 2.25em;

        &:first-child
        {
            grid-area: gnral;
            --label-in-margin-size: 1.25em;
        }

        & input
        {
            text-align: center;
            border-top-width: 1px;
        }
        & label
        {
            width: 100%;
            text-align: center;
        }
    }
}

/* See row 1, save scores */
#misc-combat
{
    gap: 1.25em;

    & .score-container
    {
        margin: auto;
    }
}

#defense-score
{
    grid-template-columns: repeat(3, 1fr);
    grid-template-areas:
        "totl totl totl"
        "titl titl titl"
        "base enha misc";
}

/* #endregion */

/* #endregion */

/* #endregion */

/* #region Skills & Feats */

#skills-and-feats
{
    margin-top: 2em;

    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 2em;
}

#skills-headers
{
    margin-bottom: 0.6em;
}
#skills-headers > *
{
    align-self: flex-end;

    &:nth-child(n+2)
    {
        font-size: 1.17em;
        color: var(--text-secondary);
    }
}

.skills-row
{
    display: grid;
    grid-template-rows: 100%;
    grid-template-columns: auto 8ch 6ch 6ch 10ch;
    gap: 1em;
    align-items: center;

    & > *:nth-child(n+2)
    {
        text-align: center;

        font-family: var(--font-header);
        font-weight: 600;
        font-variation-settings: "wdth" 75;
        text-transform: uppercase;
    }
}

.skill-name
{
    font-size: 1.3em;
}
.skill-ability
{
    font-size: 1.17em;
}

.skill-ability
{
    color: var(--text-secondary);
    border: 1px solid var(--border-light);
    border-radius: 100%;
    margin: auto;
    padding: 0 0.25ch;
}

.skill-total
{
    border: 3px double var(--border-light);
}

/* #endregion */